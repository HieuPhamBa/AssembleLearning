


ARM Macro Assembler    Page 1 


    1 00000000         ; Tong so nguyen to trong day 
    2 00000000         
    3 00000000                 AREA             RESET, DATA, READONLY
    4 00000000 20000000        DCD              0x20000000
    5 00000004 00000000        DCD              START
    6 00000008         
    7 00000008         MATRAN
    8 00000008 00000002 
              00000003 
              00000004         DCD              2, 3, 4
    9 00000014 00000008 
              00000007 
              00000009         DCD              8, 7, 9
   10 00000020 0000000A 
              0000000B 
              0000000C         DCD              10, 11, 12
   11 0000002C 00000009 
                       TONGSOPTU
                               DCD              9
   12 00000030         
   13 00000030                 AREA             MAINSOURCE, CODE, READONLY
   14 00000000                 ENTRY
   15 00000000         
   16 00000000         START
   17 00000000         
   18 00000000         ; R0 tong cac so nguyen to
   19 00000000         ; R1 phan tu dau mang
   20 00000000         ; R2 do dai mang
   21 00000000         ; R3 phan tu offset, phan tu dc load ra
   22 00000000         MAIN    PROC
   23 00000000 F04F 0000       MOV              R0, #0
   24 00000004 F04F 0300       MOV              R3, #0
   25 00000008         
   26 00000008 4913            LDR              R1, =MATRAN
   27 0000000A F85F 2004       LDR              R2, TONGSOPTU
   28 0000000E         
   29 0000000E         LOOP
   30 0000000E 2A00            CMP              R2, #0
   31 00000010 D00A            BEQ              KETTHUCHAMMAIN
   32 00000012         
   33 00000012 F851 3B04       LDR              R3, [R1], #4 ; R3 = R1, dia chi
                                                             R1 =  dia chi R1 +
                                                             4
   34 00000016 F1A2 0201       SUB              R2, #1
   35 0000001A         
   36 0000001A F7FF FFFE       BL               KIEMTRASONGUYENTO
   37 0000001E         
   38 0000001E 2F01            CMP              R7, #1
   39 00000020 D000            BEQ              CONGSONGUYENTO
   40 00000022         
   41 00000022 E7F4            B                LOOP
   42 00000024         
   43 00000024         CONGSONGUYENTO
   44 00000024 4418            ADD              R0, R3
   45 00000026 E7F2            B                LOOP
   46 00000028         
   47 00000028         KETTHUCHAMMAIN
   48 00000028 4770            BX               LR
   49 0000002A                 ENDP



ARM Macro Assembler    Page 2 


   50 0000002A         
   51 0000002A         ; Kiem tra so nguyen so luu thanh R3, ket qua luu thanh 
                       R7
   52 0000002A         ; Chia phan tu trong R1 tu 1->R3-1
   53 0000002A         ; R7 la phan tu luu 1 -> R3, 1
   54 0000002A         KIEMTRASONGUYENTO
                               PROC
   55 0000002A 2B00            CMP              R3, #0      ; Neu R3 = 0 (0 kho
                                                            ng la so nguyen to)
                                                            
   56 0000002C D00D            BEQ              KHONGLASONT
   57 0000002E         
   58 0000002E 2B02            CMP              R3, #2      ; Neu R3 <=2 (1, 2 
                                                            la so nguyen to)
   59 00000030 DB0E            BLT              LASONT
   60 00000032         
   61 00000032 461C            MOV              R4, R3      ; Gan R4 = R3
   62 00000034         
   63 00000034         ; lap N-1 den 2
   64 00000034         LAPCHIA
   65 00000034 2C02            CMP              R4, #2      ; So sanh R4 voi 2
   66 00000036 DD0B            BLE              LASONT      ; Neu R4 <= 2 => R4
                                                             khong chia het so 
                                                            nao tu 2 => n-1, R4
                                                             la so nguyen to
   67 00000038         
   68 00000038 F1A4 0401       SUB              R4, #1
   69 0000003C         
   70 0000003C         ;Kiem tra phan du
   71 0000003C FB93 F5F4       SDIV             R5, R3, R4  ; R5 = R3 / R4
   72 00000040 FB05 3614       MLS              R6, R5, R4, R3 
                                                            ; R6 = R5 * R4 - R3
                                                            
   73 00000044         
   74 00000044 2E00            CMP              R6, #0
   75 00000046 D000            BEQ              KHONGLASONT
   76 00000048         
   77 00000048 E7F4            B                LAPCHIA
   78 0000004A         
   79 0000004A         KHONGLASONT
   80 0000004A F04F 0700       MOV              R7, 0
   81 0000004E E002            B                KETTHUCKIEMTRASNT
   82 00000050         
   83 00000050         LASONT
   84 00000050 F04F 0701       MOV              R7, 1
   85 00000054 E7FF            B                KETTHUCKIEMTRASNT
   86 00000056         
   87 00000056         KETTHUCKIEMTRASNT
   88 00000056 4770            BX               LR
   89 00000058                 ENDP
   90 00000058         
   91 00000058                 END
              00000000 
Command Line: --debug --xref --cpu=Cortex-M3 --apcs=interwork --depend=.\tongso
nguyento.d -o.\tongsonguyento.o -IC:\Keil\ARM\RV31\INC -IC:\Keil\ARM\CMSIS\Incl
ude -IC:\Keil\ARM\Inc\ST\STM32F10x --list=.\tongsonguyento.lst TongSoNguyenTo.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

MATRAN 00000008

Symbol: MATRAN
   Definitions
      At line 7 in file TongSoNguyenTo.s
   Uses
      At line 26 in file TongSoNguyenTo.s
Comment: MATRAN used once
RESET 00000000

Symbol: RESET
   Definitions
      At line 3 in file TongSoNguyenTo.s
   Uses
      None
Comment: RESET unused
TONGSOPTU 0000002C

Symbol: TONGSOPTU
   Definitions
      At line 11 in file TongSoNguyenTo.s
   Uses
      At line 27 in file TongSoNguyenTo.s
Comment: TONGSOPTU used once
3 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

CONGSONGUYENTO 00000024

Symbol: CONGSONGUYENTO
   Definitions
      At line 43 in file TongSoNguyenTo.s
   Uses
      At line 39 in file TongSoNguyenTo.s
Comment: CONGSONGUYENTO used once
KETTHUCHAMMAIN 00000028

Symbol: KETTHUCHAMMAIN
   Definitions
      At line 47 in file TongSoNguyenTo.s
   Uses
      At line 31 in file TongSoNguyenTo.s
Comment: KETTHUCHAMMAIN used once
KETTHUCKIEMTRASNT 00000056

Symbol: KETTHUCKIEMTRASNT
   Definitions
      At line 87 in file TongSoNguyenTo.s
   Uses
      At line 81 in file TongSoNguyenTo.s
      At line 85 in file TongSoNguyenTo.s

KHONGLASONT 0000004A

Symbol: KHONGLASONT
   Definitions
      At line 79 in file TongSoNguyenTo.s
   Uses
      At line 56 in file TongSoNguyenTo.s
      At line 75 in file TongSoNguyenTo.s

KIEMTRASONGUYENTO 0000002A

Symbol: KIEMTRASONGUYENTO
   Definitions
      At line 54 in file TongSoNguyenTo.s
   Uses
      At line 36 in file TongSoNguyenTo.s
Comment: KIEMTRASONGUYENTO used once
LAPCHIA 00000034

Symbol: LAPCHIA
   Definitions
      At line 64 in file TongSoNguyenTo.s
   Uses
      At line 77 in file TongSoNguyenTo.s
Comment: LAPCHIA used once
LASONT 00000050

Symbol: LASONT
   Definitions
      At line 83 in file TongSoNguyenTo.s
   Uses
      At line 59 in file TongSoNguyenTo.s
      At line 66 in file TongSoNguyenTo.s




ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols

LOOP 0000000E

Symbol: LOOP
   Definitions
      At line 29 in file TongSoNguyenTo.s
   Uses
      At line 41 in file TongSoNguyenTo.s
      At line 45 in file TongSoNguyenTo.s

MAIN 00000000

Symbol: MAIN
   Definitions
      At line 22 in file TongSoNguyenTo.s
   Uses
      None
Comment: MAIN unused
MAINSOURCE 00000000

Symbol: MAINSOURCE
   Definitions
      At line 13 in file TongSoNguyenTo.s
   Uses
      None
Comment: MAINSOURCE unused
START 00000000

Symbol: START
   Definitions
      At line 16 in file TongSoNguyenTo.s
   Uses
      At line 5 in file TongSoNguyenTo.s
Comment: START used once
11 symbols
346 symbols in table
